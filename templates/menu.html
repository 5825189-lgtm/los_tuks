<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Las Tuks - Menú</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-image: url('/static/tuks-img.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color: #000;
        }

        h1 {
            margin-top: 30px;
            font-size: 2.2em;
            font-weight: bold;
        }

        p {
            font-style: italic;
            color: #444;
        }

        .menu-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 40px auto;
        }

        .pupusa-card {
            background-color: rgba(255, 255, 240, 0.9);
            border-radius: 15px;
            padding: 20px;
            width: 300px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .pupusa-card h2 {
            margin-bottom: 10px;
        }

        .pupusa-card button {
            background-color: #ddd;
            border: none;
            padding: 5px 10px;
            margin: 5px;
            cursor: pointer;
            border-radius: 5px;
        }

        .pupusa-card button:hover {
            background-color: #bbb;
        }

        .pedido-panel {
            background-color: rgba(255, 255, 255, 0.95);
            width: 80%;
            margin: 20px auto;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            text-align: left;
        }

        input {
            padding: 5px;
            width: 45%;
            margin: 5px;
        }

        button.enviar {
            background-color: gold;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
        }

        button.cancelar {
            background-color: #ccc;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
        }

        footer {
            margin-top: 40px;
            color: #555;
            font-size: 0.9em;
        }
    </style>
</head>
<body>

    <h1>Las Tuks</h1>
    <p>Sabor que une generaciones</p>

    <div class="menu-container">
        <div class="pupusa-card" data-nombre="Frijol con Queso" data-precio="1.50">
            <h2>Frijol con Queso</h2>
            <p>$1.50</p>
            <button onclick="cambiarCantidad(this, -1)">-</button>
            <span class="cantidad">0</span>
            <button onclick="cambiarCantidad(this, 1)">+</button>
        </div>

        <div class="pupusa-card" data-nombre="Revueltas" data-precio="1.75">
            <h2>Revueltas</h2>
            <p>$1.75</p>
            <button onclick="cambiarCantidad(this, -1)">-</button>
            <span class="cantidad">0</span>
            <button onclick="cambiarCantidad(this, 1)">+</button>
        </div>

        <div class="pupusa-card" data-nombre="Especialidad de la casa" data-precio="2.00">
            <h2>Especialidad de la casa</h2>
            <p>$2.00</p>
            <button onclick="cambiarCantidad(this, -1)">-</button>
            <span class="cantidad">0</span>
            <button onclick="cambiarCantidad(this, 1)">+</button>
        </div>
    </div>

    <form class="pedido-panel" action="/hacer_pedido" method="POST" onsubmit="return prepararPedido()">
        <h3>Tu pedido</h3>
        <p id="detalle">No hay pupusas seleccionadas.</p>
        <p><strong>Total: $<span id="total">0.00</span></strong></p>

        <input type="hidden" name="pedido" id="pedidoInput">
        <input type="hidden" name="total" id="totalInput">

        <input type="text" name="nombre" placeholder="Nombre" required>
        <input type="text" name="telefono" placeholder="Teléfono (opcional)">
        <br>
        <button type="submit" class="enviar">Realizar pedido</button>
        <button type="reset" class="cancelar" onclick="resetPedido()">Cancelar</button>
    </form>

    <footer>© Las Tuks — Pupusas artesanales</footer>

    <script>
        function cambiarCantidad(btn, delta) {
            const card = btn.parentElement;
            const cantidadElem = card.querySelector(".cantidad");
            let cantidad = parseInt(cantidadElem.textContent);
            cantidad = Math.max(0, cantidad + delta);
            cantidadElem.textContent = cantidad;
            actualizarPedido();
        }

        function actualizarPedido() {
            const cards = document.querySelectorAll(".pupusa-card");
            let total = 0;
            let detalle = "";

            cards.forEach(card => {
                const nombre = card.dataset.nombre;
                const precio = parseFloat(card.dataset.precio);
                const cantidad = parseInt(card.querySelector(".cantidad").textContent);
                if (cantidad > 0) {
                    total += precio * cantidad;
                    detalle += `${cantidad}x ${nombre} ($${precio.toFixed(2)} c/u)\n`;
                }
            });

            document.getElementById("detalle").textContent =
                detalle || "No hay pupusas seleccionadas.";
            document.getElementById("total").textContent = total.toFixed(2);
        }

        function prepararPedido() {
            const detalle = document.getElementById("detalle").textContent;
            const total = document.getElementById("total").textContent;
            document.getElementById("pedidoInput").value = detalle;
            document.getElementById("totalInput").value = total;
            return true;
        }

        function resetPedido() {
            document.querySelectorAll(".cantidad").forEach(c => c.textContent = "0");
            actualizarPedido();
        }
    </script>

</body>
</html>
